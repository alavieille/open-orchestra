{# factorization of archestra_areas and archestra_blocks behavior #}
{% block generic_behavior %}
    {{ form_widget(form) }}
    {% if parameter is defined %}
        {{ put_bottom(render(controller(controller, parameter))) }}
    {% else %}
        {{ put_bottom(render(controller(controller))) }}
    {% endif %}
{% endblock %}

{% block orchestra_areas_widget %}
    {{ block('generic_behavior') }}
{% endblock %}

{% block orchestra_blocks_widget %}
    {{ block('generic_behavior') }}
{% endblock %}

{% extends "form_div_layout.html.twig" %}

{% block form_row %}
{% spaceless %}
    <section>
    {% if block_prefixes[1] == 'checkbox' %}
        <label class="checkbox">
            {{ form_widget(form) }}
            <i></i>{{ form_label(form, null, {'label_attr': {'class': 'label'}}) }}</label>
    {% elseif  block_prefixes[1] == 'contentAttributes' %}
        {{ form_widget(form) }}
    {% else %}
        {{ form_label(form, null, {'label_attr': {'class': 'label'}}) }}
        <label class="label {{ block_prefixes[1]|lexicon_translator }} {% if multiple is defined and multiple %} select-multiple{% endif %}">
            {{ form_widget(form) }}{% if multiple is not defined or not multiple %}<i></i>{% endif %}
        </label>
    {% endif %}
        <div class="note">
            {{ form_errors(form) }}
        </div>
    </section>
{% endspaceless %}
{% endblock form_row %}

{% block form %}
{% spaceless %}
    {% if form.vars.inDialog is defined and form.vars.inDialog %}
        <div id="dialog-{{ form.vars.name }}" style="display:none;" title="{{ form.vars.name }}">
    {% endif %}
    {{ form_start(form, {'attr': {'class': 'smart-form'}}) }}
        <fieldset>
        {{ form_widget(form) }}
        </fieldset>
    {{ form_rest(form) }}
    {{ form_end(form) }}
    {% if form.vars.inDialog is defined  and form.vars.inDialog %}
        </div>
    {% endif %}
    {% if form.vars.subForm is not defined %}
        {{ print_bottom() }}
    {% endif %}
    <script>
        var urlJs = "{{ asset('bundles/phporchestracms/js/') }}";
        {% if form.vars.js is defined and form.vars.js != '' %}
        loadScript("{{ asset('bundles/phporchestracms/js/' ~ form.vars.js) }}?" + Math.random());
        {% endif %}
    </script>
{% endspaceless %}
{% endblock form %}

{% block form_errors %}
{% spaceless %}
    {% if errors|length > 0 %}
    <div class="alert alert-danger fade in">
        {% for error in errors %}
            {{ error.messageTemplate|trans(error.messageParameters, 'validators') }}<br />
        {% endfor %} 
    </div>
    {% endif %}
{% endspaceless %}
{% endblock form_errors %}
