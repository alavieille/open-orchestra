{% block orchestra_areas_widget %}
    {% if form.vars.dialogPath != '' %}
        {% if form.vars.js != ''%}
            <script src="{{ asset('bundles/phporchestracms/js/' ~ form.vars.js) }}"></script>
        {% endif %}
        <div id="dialog-{{ form.vars.name }}" style="display:none;" title="Area">
            {% include form.vars.dialogPath %}
        </div>
        <script>
            $( "#dialog-{{ form.vars.name }}" ).dialog($.extend(dialog_parameter, {"addArray" : {{ form.vars.objects|json_encode|raw }}}));
        </script>
    {% endif %}
    {{ form_widget(form) }}
{% endblock %}

{% block orchestra_blocks_widget %}
    {% if form.vars.dialogPath %}
        {% if form.vars.js != ''%}
            <script src="{{ asset('bundles/phporchestracms/js/' ~ form.vars.js) }}"></script>
        {% endif %}
        <div id="dialog-{{ form.vars.name }}" style="display:none;" title="Area">
            {% include form.vars.dialogPath %}
        </div>
        <script>
            $( "#dialog-{{ form.vars.name }}" ).dialog($.extend(dialog_parameter, {"addArray" : {{ form.vars.objects|json_encode|raw }}}));
            $(document).ready(function() {
                $("#dialog-{{ form.vars.name }} select[name='{{ form.vars.name }}_method']").change(function(){
                    refreshForm($(this),
                        '{{ form.vars.name }}',
                        {{ render(controller('PHPOrchestraCMSBundle:Blocks:showAllBlocks', { 'prefix' : form.vars.name ~ '_'})) }},
                        '{{ path('php_orchestra_ajax_show_all_nodes') }}',
                        '{{ path('php_orchestra_ajax_show_blocks_from_node') }}');
                });
            });
        </script>
    {% endif %}
    {{ form_widget(form) }}
{% endblock %}

{% extends "form_div_layout.html.twig" %}
{% block form %}
    <div id="dialog-{{ form.vars.name }}" style="display:none;" title="Template">
        {{ parent() }}
    </div>
    <div id="{{ form.vars.name }}-model"></div>
    <script>
        $( "#dialog-{{ form.vars.name }}" ).dialog($.extend(dialog_parameter, {"addArray" : {{ form.vars.objects|json_encode|raw }}}));
        $(document).ready(function(){
            $('#{{ form.vars.name }}-model').parseTemplate({"init" : true});
        });
    </script>
{% endblock %}