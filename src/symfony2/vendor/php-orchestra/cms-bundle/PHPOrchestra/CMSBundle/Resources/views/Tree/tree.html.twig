{#{ (form._token.value) }#}
{% import "PHPOrchestraCMSBundle:Tree:tree-macros.html.twig" as macros %}
<script src="{{ asset('bundles/phporchestracms/js/pagegenerator/tree.js') }}"></script>
<li><a href="">{{ name }}</a>
{% set name = name|e('url')|replace({'%': '-'}) %}
{{ macros.menu_links(links, name) }}
</li>

<script>
$(".{{ name }}-connectedSortable").sortable({
    connectWith: ".{{ name }}-connectedSortable",
    placeholder: "{{ name }}-sortable-placeholder active",
    toleranceElement: '> div',
    appendTo: "body",
    helper: 'clone'
});

$('.{{ name }}-connectedSortable').bind('sortstart', function(event, ui) {
    $('.{{ name }}-sortable-placeholder').html('<a href="">' + ui.helper.find('a').html() + '</a>');
    ui.helper.css('display', 'none');
});

$('.{{ name }}-connectedSortable i').click(function(e){
    var parameter = $(this).data();
    treeAjaxCall(parameter.url, parameter.value);
});
</script>